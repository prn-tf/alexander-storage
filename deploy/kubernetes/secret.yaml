apiVersion: v1
kind: Secret
metadata:
  name: alexander-secrets
  labels:
    app: alexander-storage
type: Opaque
stringData:
  # SECURITY WARNING: Replace these with actual secure values before production!
  # Generate with: openssl rand -hex 32
  # Store these securely using:
  # - AWS Secrets Manager
  # - HashiCorp Vault  
  # - External Secrets Operator (ESO)
  # - Google Secret Manager
  # - Azure Key Vault
  
  # Sample value - MUST BE REPLACED IN PRODUCTION
  ALEXANDER_AUTH_MASTER_KEY: "0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef"
  ALEXANDER_AUTH_SSE_MASTER_KEY: "fedcba9876543210fedcba9876543210fedcba9876543210fedcba9876543210"

---
# RECOMMENDED: Use External Secrets Operator for production
# See: https://external-secrets.io/

apiVersion: v1
kind: ConfigMap
metadata:
  name: alexander-secret-instructions
  labels:
    app: alexander-storage
data:
  SECRETS_SETUP.md: |
    # Alexander Storage - Secret Management Guide
    
    ## For Production Deployments
    
    1. **Using External Secrets Operator (ESO)**:
       - Install ESO: `helm repo add external-secrets https://charts.external-secrets.io`
       - Create SecretStore pointing to your secret backend
       - Uncomment the ExternalSecret manifest below
    
    2. **Using AWS Secrets Manager**:
       - Create secret in AWS Secrets Manager
       - Grant IAM role permissions to EC2 instances
       - Reference in deployment env vars
    
    3. **Using HashiCorp Vault**:
       - Deploy Vault with persistence
       - Configure Kubernetes auth method
       - Use Vault Agent sidecar injection
    
    4. **Manual Secret Rotation**:
       ```bash
       kubectl create secret generic alexander-secrets \
         --from-literal=ALEXANDER_AUTH_MASTER_KEY=$(openssl rand -hex 32) \
         --from-literal=ALEXANDER_AUTH_SSE_MASTER_KEY=$(openssl rand -hex 32) \
         --dry-run=client -o yaml | kubectl apply -f -
       
       kubectl rollout restart deployment/alexander-storage
       ```
